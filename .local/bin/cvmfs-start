#!/bin/sh

# Starts a docker container for CVMFS auto-mounting at /cvmfs

echo "Starting Docker container 'cvmfs_docker'. CVMFS tree will be accesible after ~30s at /cvmfs"

docker run -d --name "cvmfs_docker" \
  -e CVMFS_CLIENT_PROFILE=single \
  -e CVMFS_REPOSITORIES=atlas.cern.ch,atlas-nightlies.cern.ch,atlas-condb.cern.ch,grid.cern.ch,sft.cern.ch,sft-nightlies.cern.ch,unpacked.cern.ch \
  --cap-add SYS_ADMIN \
  --device /dev/fuse \
  --volume /cvmfs:/cvmfs:shared \
  --restart unless-stopped \
  cvmfs/service
